"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4197],{4197:(O,p,d)=>{d.r(p),d.d(p,{HomePageModule:()=>Y});var m=d(177),s=d(4341),a=d(4742),f=d(4964),e=d(4438),g=d(385),v=d(5265),u=d(467),h=d(9381),P=d(3683);function _(o,r){if(1&o&&(e.j41(0,"ion-avatar"),e.nrm(1,"img",11),e.k0s()),2&o){const n=e.XpG();e.R7$(),e.Y8G("src",n.form.value.image,e.B4B)}}function b(o,r){1&o&&e.nrm(0,"ion-icon",12)}function U(o,r){1&o&&(e.j41(0,"div"),e.EFF(1,"Este campo es requerido"),e.k0s())}function k(o,r){1&o&&(e.j41(0,"div"),e.EFF(1,"El nomnbre debe tener al menos 4 caracteres"),e.k0s())}function C(o,r){if(1&o&&(e.j41(0,"div",13),e.DNE(1,U,2,0,"div",2)(2,k,2,0,"div",2),e.k0s()),2&o){const n=e.XpG();e.R7$(),e.Y8G("ngIf",null==n.form.controls.name.errors?null:n.form.controls.name.errors.required),e.R7$(),e.Y8G("ngIf",null==n.form.controls.name.errors?null:n.form.controls.name.errors.minlenght)}}function G(o,r){1&o&&(e.j41(0,"div"),e.EFF(1,"Este campo es requerido"),e.k0s())}function F(o,r){1&o&&(e.j41(0,"div"),e.EFF(1,"El precio minimo debe ser 0"),e.k0s())}function I(o,r){if(1&o&&(e.j41(0,"div",13),e.DNE(1,G,2,0,"div",2)(2,F,2,0,"div",2),e.k0s()),2&o){const n=e.XpG();e.R7$(),e.Y8G("ngIf",null==n.form.controls.price.errors?null:n.form.controls.price.errors.required),e.R7$(),e.Y8G("ngIf",null==n.form.controls.price.errors?null:n.form.controls.price.errors.min)}}function T(o,r){1&o&&(e.j41(0,"div"),e.EFF(1,"Este campo es requerido"),e.k0s())}function $(o,r){1&o&&(e.j41(0,"div"),e.EFF(1,"La cantidad minima debe ser 0"),e.k0s())}function E(o,r){if(1&o&&(e.j41(0,"div",13),e.DNE(1,T,2,0,"div",2)(2,$,2,0,"div",2),e.k0s()),2&o){const n=e.XpG();e.R7$(),e.Y8G("ngIf",null==n.form.controls.soldUnits.errors?null:n.form.controls.soldUnits.errors.required),e.R7$(),e.Y8G("ngIf",null==n.form.controls.soldUnits.errors?null:n.form.controls.soldUnits.errors.min)}}let y=(()=>{var o;class r{constructor(){this.form=new s.gE({id:new s.MJ(""),image:new s.MJ("",[s.k0.required]),name:new s.MJ("",[s.k0.required,s.k0.minLength(4)]),price:new s.MJ("",[s.k0.required,s.k0.min(0)]),soldUnits:new s.MJ("",[s.k0.required,s.k0.min(0)])}),this.firebaseSvc=(0,e.WQX)(g.f),this.utilsSvc=(0,e.WQX)(v.T),this.user={}}ngOnInit(){this.user=this.utilsSvc.getFromLocalStorage("user")}takeImage(){var t=this;return(0,u.A)(function*(){const i=(yield t.utilsSvc.takePicture("Imagen del Producto")).dataUrl;t.form.controls.image.setValue(i)})()}submit(){var t=this;return(0,u.A)(function*(){if(t.form.valid){let i=`users/${t.user.uid}/products`;const c=yield t.utilsSvc.loading();yield c.present();let M=t.form.value.image,H=`${t.user.uid}/${Date.now()}`,D=yield t.firebaseSvc.uploadImage(H,M);t.form.controls.image.setValue(D),delete t.form.value.id,t.firebaseSvc.addDocument(i,t.form.value).then(function(){var l=(0,u.A)(function*(N){t.utilsSvc.dismissModal({success:!0}),t.utilsSvc.presentToast({message:"Producto creado exitosamente",duration:1500,color:"success",position:"middle",icon:"checkmark-circle-outline"})});return function(N){return l.apply(this,arguments)}}()).catch(l=>{console.log(l),t.utilsSvc.presentToast({message:l.message,duration:2500,color:"primary",position:"middle",icon:"alert-circle-outline"})}).finally(()=>{c.dismiss()})}})()}}return(o=r).\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-add-update-product"]],decls:17,vars:11,consts:[["title","Agregar Producto",3,"isModal"],[1,"ion-padding","ion-text-center",3,"ngSubmit","keypress.enter","formGroup"],[4,"ngIf"],["class","image-icon","name","image-outline",4,"ngIf"],["mode","ios","size","small","shape","round",3,"click"],["autocomplete","name","type","text","label","Nombre",3,"control"],["class","validators",4,"ngIf"],["type","number","label","Precio",3,"control"],["type","number","label","Unidades Vendidas",3,"control"],["mode","ios","type","submit",1,"ion-margin",3,"disabled"],["slot","end","name","checkmark-circle-outline"],[3,"src"],["name","image-outline",1,"image-icon"],[1,"validators"]],template:function(t,i){1&t&&(e.nrm(0,"app-header",0),e.j41(1,"ion-content")(2,"form",1),e.bIt("ngSubmit",function(){return i.submit()})("keypress.enter",function(){return i.submit()}),e.DNE(3,_,2,1,"ion-avatar",2)(4,b,1,0,"ion-icon",3),e.nrm(5,"br"),e.j41(6,"ion-button",4),e.bIt("click",function(){return i.takeImage()}),e.EFF(7," Tomar/Seleccionar "),e.k0s(),e.nrm(8,"app-custom-input",5),e.DNE(9,C,3,2,"div",6),e.nrm(10,"app-custom-input",7),e.DNE(11,I,3,2,"div",6),e.nrm(12,"app-custom-input",8),e.DNE(13,E,3,2,"div",6),e.j41(14,"ion-button",9),e.EFF(15," Agregar Producto "),e.nrm(16,"ion-icon",10),e.k0s()()()),2&t&&(e.Y8G("isModal",!0),e.R7$(2),e.Y8G("formGroup",i.form),e.R7$(),e.Y8G("ngIf",i.form.value.image),e.R7$(),e.Y8G("ngIf",!i.form.value.image),e.R7$(4),e.Y8G("control",i.form.controls.name),e.R7$(),e.Y8G("ngIf",i.form.controls.name.errors&&i.form.controls.name.touched),e.R7$(),e.Y8G("control",i.form.controls.price),e.R7$(),e.Y8G("ngIf",i.form.controls.price.errors&&i.form.controls.price.touched),e.R7$(),e.Y8G("control",i.form.controls.soldUnits),e.R7$(),e.Y8G("ngIf",i.form.controls.soldUnits.errors&&i.form.controls.soldUnits.touched),e.R7$(),e.Y8G("disabled",i.form.invalid))},dependencies:[m.bT,a.mC,a.Jm,a.W9,a.iq,s.qT,s.cb,s.j4,h.l,P.H],styles:[".image-icon[_ngcontent-%COMP%]{font-size:100px;opacity:30%}ion-avatar[_ngcontent-%COMP%]{width:200px;height:160px;--border-radius: 15px;margin:0 auto}"]}),r})();function A(o,r){if(1&o&&(e.j41(0,"ion-item-sliding",5)(1,"ion-item")(2,"ion-avatar"),e.nrm(3,"img",6),e.k0s(),e.j41(4,"ion-label")(5,"div",7),e.EFF(6),e.k0s()()(),e.j41(7,"ion-item-options")(8,"ion-item-option"),e.nrm(9,"ion-icon",8),e.k0s(),e.j41(10,"ion-item-option",9),e.nrm(11,"ion-icon",10),e.k0s()()()),2&o){const n=r.$implicit;e.R7$(3),e.Y8G("src",n.image,e.B4B),e.R7$(3),e.JRh(n.name)}}const R=[{path:"",component:(()=>{var o;class r{constructor(){this.firebaseSvc=(0,e.WQX)(g.f),this.utilsSvc=(0,e.WQX)(v.T),this.products=[]}ngOnInit(){}signOut(){this.firebaseSvc.signOut()}user(){return this.utilsSvc.getFromLocalStorage("user")}ionViewWillEnter(){this.getProducts()}getProducts(){let t=`users/${this.user().uid}/products`,i=this.firebaseSvc.getCollectionData(t).subscribe({next:c=>{console.log(c),this.products=c,i.unsubscribe()}})}addUpdateProduct(){this.utilsSvc.presentModal({component:y,cssClass:"add-update-modal"})}}return(o=r).\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-home"]],decls:9,vars:1,consts:[["title","Inicio"],["class","product-item",4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],[3,"click"],["name","add"],[1,"product-item"],[3,"src"],[1,"name"],["name","create-outline",1,"option-btn"],["color","danger"],["name","trash-outline",1,"option-btn"]],template:function(t,i){1&t&&(e.nrm(0,"app-header",0),e.j41(1,"ion-content")(2,"ion-list"),e.DNE(3,A,12,2,"ion-item-sliding",1),e.k0s(),e.j41(4,"ion-fab",2)(5,"ion-fab-button",3),e.bIt("click",function(){return i.addUpdateProduct()}),e.nrm(6,"ion-icon",4),e.k0s()(),e.j41(7,"ion-button",3),e.bIt("click",function(){return i.signOut()}),e.EFF(8," Cerrar Sesion "),e.k0s()()),2&t&&(e.R7$(3),e.Y8G("ngForOf",i.products))},dependencies:[m.Sq,a.mC,a.Jm,a.W9,a.Q8,a.YW,a.iq,a.uz,a.LU,a.CE,a.A7,a.he,a.nf,h.l]}),r})()}];let S=(()=>{var o;class r{}return(o=r).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[f.iI.forChild(R),f.iI]}),r})();var j=d(3887);let Y=(()=>{var o;class r{}return(o=r).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[m.MD,s.YN,a.bv,S,j.G]}),r})()}}]);